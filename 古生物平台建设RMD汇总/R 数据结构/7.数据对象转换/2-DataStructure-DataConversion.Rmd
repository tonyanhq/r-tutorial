---
title: "数据结构-数据类型的转换"
output: 
  html_document:
    number_sections: TRUE
    toc: TRUE
    toc_float: TRUE
    code_folding: show
    fig_width: 7
    fig_height: 4.5
    theme: united
    highlight: tango
---
<font size=4 face="微软雅黑">


&emsp;&emsp;R编程中对数据进行加工处理时常涉及算术运算问题，要求数据具有相同或者兼容的存储类型。
&emsp;&emsp;例如，整数型和双精度型是兼容的，字符串行和整数型却不兼容。因此数据的存储类型转换很有必要。数据结构类型表如下所示：
```{r,echo=FALSE,message=FALSE,warning=FALSE}
library(readxl)
library(knitr)          # 加载knitr包，为了使用kable函数
数据存储类型结构说明表 = read_excel("D:/TASK/2R语言基础/数据存储类型结构说明表.xlsx")   ## 读取原始数据
kable(head(数据存储类型结构说明表 ,6))
```

# 数据存储类型
***

为了进行统计分析，会将连续变量离散化等操作，有时就需要将数据存储类型进行转换

## **判断数据对象存储类型**

判断数据存储类型有两种，

1）is.函数判断存储类型名

函数格式：is.存储类型名（数据对象名）

```{r,}
a<-66.64 # 创建数值型向量，属于数值型
is.numeric(a)# 存储类型为数值型
```
整数型的判断
```{r,}
is.integer(a) #存储类型不是整数型
```
双精度型判断
```{r,}
is.double(a)  #存储类型是双精度型
```
字符型判断
```{r,}
is.character(a)  #存储类型不是字符型
```
逻辑型判断
```{r,}
is.logical(a)  #存储类型不是逻辑性
```

2）typeof可以直接判断出数据对象的存储类型

函数格式：typeof(数据对象名)
```{r,}
typeof(a)# 显示a的存储类型
```
## **数据对象存储类型转换**

通过as.存储类型名函数将数据对象存储类型转换为指定类型

函数格式为：as.存储类型名（数据对象名）
```{r,}
a<-66.6
typeof(a)# 显示a的存储类型
```
将双精度性转换为整数型
```{r,}
(a<-as.integer(a))
```
显示a的存储类型
```{r,}
typeof(a)
```

# 数据结构类型
***
 数据对象结构类型转换包括：向量和矩阵以及向量与因子之间的转换

## **向量与矩阵转换**
创建包含5个元素的向量a
```{r,}
(a<-c(1:5)) 
```
由向量a派生成矩阵b
```{r,}
(b<-matrix(a,nrow=5,ncol=4,byrow=TRUE))
```
将向量a转换为5行1列的矩阵
```{r,}
(a<-as.matrix(a)) 
```
判断a是否为矩阵
```{r,}
is.matrix(a)
```
将矩阵b转换为向量b
```{r,}
(b<-as.vector(b)) 
```
判断b是否为向量
```{r,}
is.vector(b) 
```

* 向量转换为矩阵时，矩阵默认只有1列，行数还是等于原来的元素个数。

* 矩阵转换为向量时，以列为单位依次从左到右读取矩阵的数据


## **向量转换为因子**


1）as.factor函数可以将向量转换为因子

基本格式为：as.factor(向量名)

创建包含4个元素的字符串向量X
```{r,}
(X<-c("不及格","及格","良好","优秀"))
```
判断X是否为向量
```{r,}
(is.vector(X)) 
```
将向量X转换为因子
```{r,}
(Y<-as.factor(X)) 
```
判断Y是否为因子
```{r,}
(is.factor(Y)) 
```
查看Y的存储类型
```{r,}
typeof(Y)  
```

2）参数labels重设类别值 
 
函数格式为：

factor(向量名，levels=c(类别值列表),labels=c(类别值列表))

参数levels是原类别值，labels为新类别值，彼此一一对应。
```{r,}
X<-c("50","60","80","98")  # 创建向量X
(Y<-factor(X,levels=c("50","60","80","98")))  #转换为因子
```
因子水平值的重设类别
```{r,}
(Y<-factor(X,levels=c("50","60","80","98"),labels=c("不及格","及格","良好","优秀")))
```
* 通过参数levels和labels，将原类别值"50","60","80"，“90”依次替换为"不及格","及格",“良好”，“优秀”。